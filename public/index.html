<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perplexity AI - Live Chat</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>ðŸ§ </text></svg>">
</head>
<body>
    <!-- Background Elements -->
    <div class="bg-animation">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        <div class="floating-orb orb-3"></div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="logo-text">
                        <h1>Perplexity AI</h1>
                        <span class="logo-subtitle">Live Chat Assistant</span>
                    </div>
                </div>
                
                <div class="header-controls">
                    <div class="connection-status" id="connectionStatus">
                        <div class="status-indicator"></div>
                        <span>Connected</span>
                    </div>
                    <button class="control-btn settings-btn" id="settingsBtn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="control-btn theme-btn" id="themeBtn" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Chat Container -->
        <main class="chat-section">
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <!-- Welcome Message -->
                    <div class="message-group ai-group">
                        <div class="message-avatar ai-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-bubble ai-bubble">
                            <div class="message-content">
                                <h3>ðŸ‘‹ Welcome to Perplexity AI!</h3>
                                <p>I'm your AI assistant, ready to help with questions, research, coding, and more. What would you like to explore today?</p>
                                <div class="quick-actions">
                                    <button class="quick-btn" data-prompt="What's the latest in AI research?">
                                        <i class="fas fa-flask"></i> Latest AI News
                                    </button>
                                    <button class="quick-btn" data-prompt="Explain quantum computing simply">
                                        <i class="fas fa-atom"></i> Quantum Computing
                                    </button>
                                    <button class="quick-btn" data-prompt="Help me write a Python function">
                                        <i class="fas fa-code"></i> Code Help
                                    </button>
                                </div>
                            </div>
                            <div class="message-time" id="welcomeTime"></div>
                        </div>
                    </div>
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <div class="message-group ai-group">
                        <div class="message-avatar ai-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-bubble ai-bubble typing">
                            <div class="typing-dots">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <span class="typing-text">AI is thinking...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Context Status -->
            <div class="context-status" id="contextStatus">
                <div class="context-info">
                    <i class="fas fa-history"></i>
                    <span id="contextInfo">Context: 0 messages</span>
                </div>
                <button id="summarizeBtn" class="summarize-btn" title="Manually summarize conversation" style="display: none;">
                    <i class="fas fa-compress-alt"></i>
                    Summarize
                </button>
            </div>

            <!-- Input Area -->
            <div class="input-section">
                <div class="input-container">
                    <form class="message-form" id="messageForm">
                        <div class="input-wrapper">
                            <div class="input-field">
                                <textarea 
                                    id="messageInput" 
                                    placeholder="Ask me anything..." 
                                    rows="1"
                                    maxlength="4000"
                                ></textarea>
                                <div class="input-actions">
                                    <button type="button" class="attachment-btn" title="Attach file (coming soon)">
                                        <i class="fas fa-paperclip"></i>
                                    </button>
                                    <button type="submit" class="send-btn" id="sendBtn" title="Send message">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="input-footer">
                            <div class="input-info">
                                <span class="char-counter">
                                    <span id="charCount">0</span>/4000
                                </span>
                                <span class="model-info">
                                    Model: <span id="currentModel">Sonar</span>
                                </span>
                            </div>
                            <div class="input-shortcuts">
                                <kbd>Enter</kbd> to send â€¢ <kbd>Shift + Enter</kbd> for new line
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </main>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-header">
                <h2>
                    <i class="fas fa-cog"></i>
                    Settings
                </h2>
                <button class="close-btn" id="closeSettings">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="settings-content">
                <div class="settings-section">
                    <h3><i class="fas fa-robot"></i> Model Settings</h3>
                    <div class="setting-item">
                        <label for="modelSelect">AI Model</label>
                        <select id="modelSelect">
                            <option value="sonar">Sonar (Recommended)</option>
                        </select>
                        <small>Choose the AI model for responses</small>
                    </div>
                </div>

                <div class="settings-section">
                    <h3><i class="fas fa-sliders-h"></i> Response Settings</h3>
                    <div class="setting-item">
                        <label for="temperatureSlider">
                            Creativity
                            <span class="setting-value" id="temperatureValue">0.7</span>
                        </label>
                        <input type="range" id="temperatureSlider" min="0" max="2" step="0.1" value="0.7">
                        <small>Lower = More focused, Higher = More creative</small>
                    </div>
                    
                    <div class="setting-item">
                        <label for="maxTokensSlider">
                            Response Length
                            <span class="setting-value" id="maxTokensValue">1000</span>
                        </label>
                        <input type="range" id="maxTokensSlider" min="100" max="4000" step="100" value="1000">
                        <small>Maximum length of AI responses</small>
                    </div>

                    <div class="setting-item">
                        <label class="switch-label">
                            <input type="checkbox" id="streamingToggle" checked>
                            <span class="switch-slider"></span>
                            Live Streaming
                        </label>
                        <small>Stream responses in real-time</small>
                    </div>
                </div>

                <div class="settings-section">
                    <h3><i class="fas fa-palette"></i> Appearance</h3>
                    <div class="setting-item">
                        <label class="switch-label">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="switch-slider"></span>
                            Dark Mode
                        </label>
                        <small>Toggle dark/light theme</small>
                    </div>
                </div>

                <div class="settings-section">
                    <h3><i class="fas fa-info-circle"></i> Status</h3>
                    <div class="api-status" id="apiStatus">
                        <i class="fas fa-spinner fa-spin"></i>
                        Checking connection...
                    </div>
                </div>

                <div class="settings-actions">
                    <button class="danger-btn" id="clearChatBtn">
                        <i class="fas fa-trash"></i>
                        Clear Chat History
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Overlay -->
        <div class="settings-overlay" id="settingsOverlay"></div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <p class="loading-text">Connecting to Perplexity AI...</p>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
